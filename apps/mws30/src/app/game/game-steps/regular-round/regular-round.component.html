<ng-container *ngIf="ctx$ | async as ctx">

  <!-- Spieler ist am Zug -->
  <div *ngIf="ctx.game | currentTurn: ctx.player as currentTurn; else wait">
    <ng-container *ngIf="ctx.game | currentTurnId: ctx.player as currentTurnId">
      <div class="chosen-ones">
        <mws30-dice-cup-view [dices]="currentTurn?.dices | chosenDices"></mws30-dice-cup-view>
      </div>
      <div class="dices">
        <mws30-dice-cup *ngIf="currentTurn?.dices | chosenDices: false as dices"
                        [dices]="dices"
                        (roundClosed)="closeRound(ctx, currentTurnId, currentTurn, currentTurn.dices)"
                        (diceCupResult)="saveIntermediateResult(ctx, currentTurnId, $event, currentTurn.dices)"
                        (dicePicked)="saveIntermediateResult(ctx, currentTurnId, $event, currentTurn.dices)"></mws30-dice-cup>
      </div>
    </ng-container>
  </div>

  <!-- Spieler wartet und schaut zu -->
  <ng-template #wait>
    <p>Warten auf eigenen Spielzug...</p>
    <ng-container *ngIf="ctx.game | currentPlayer as currentPlayer">
      <p>{{currentPlayer.name}} w√ºrfelt gerade</p>
      <ng-container *ngIf="ctx.game | currentTurn: currentPlayer as currentPlayer">
        <div class="chosen-ones">
          <mws30-dice-cup-view [dices]="currentPlayer?.dices | chosenDices"></mws30-dice-cup-view>
        </div>
        <div class="dices">
          <mws30-dice-cup-view [dices]="currentPlayer.dices | chosenDices: false"></mws30-dice-cup-view>
        </div>
      </ng-container>
    </ng-container>
  </ng-template>

</ng-container>
